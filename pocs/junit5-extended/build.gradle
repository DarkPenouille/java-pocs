buildscript {
    repositories {
        mavenCentral()
        maven {
            url 'https://plugins.gradle.org/m2/'
        }
    }
    dependencies {
        classpath 'org.junit.platform:junit-platform-gradle-plugin:1.1.0'
        classpath 'com.adarshr:gradle-test-logger-plugin:1.3.1'        
    }
}

apply plugin: 'application'
apply plugin: 'java'
apply plugin: 'org.junit.platform.gradle.plugin'
apply plugin: 'com.adarshr.test-logger'

sourceCompatibility = 1.8
targetCompatibility = 1.8

mainClassName = 'com.github.diegopacheco.sandbox.java.Main'

repositories {
    mavenCentral()
    maven { url 'https://oss.sonatype.org/content/groups/public/' }
}

dependencies {
  compile 'org.slf4j:slf4j-api:1.7.25'
  compile 'org.slf4j:slf4j-jdk14:1.7.25'
  
  testCompile  group: 'org.junit.jupiter' , name: 'junit-jupiter-api'       , version: '5.2.0'
  testRuntime  group: 'org.junit.jupiter' , name: 'junit-jupiter-engine'    , version: '5.2.0'
  testRuntime  group: 'org.junit.platform', name: 'junit-platform-launcher' , version: '1.2.0'
  testRuntime  group: 'org.junit.platform', name: 'junit-platform-runner'   , version: '1.2.0'
  
}

run {    
  systemProperties System.getProperties()
}

test {
    useJUnitPlatform {
        includeTags 'v1x', 'v2x'
        includeEngines 'junit-jupiter'
    }
    testLogging.showStandardStreams = true
}

testlogger {
    theme 'standard'
    showExceptions true
    slowThreshold 1000
    showSummary true
    showStandardStreams false
}

import org.gradle.api.tasks.testing.logging.TestExceptionFormat
import org.gradle.api.tasks.testing.logging.TestLogEvent

tasks.withType(Test) {
    testLogging {
        events TestLogEvent.FAILED,
               TestLogEvent.PASSED,
               TestLogEvent.SKIPPED,
               TestLogEvent.STANDARD_ERROR,
               TestLogEvent.STANDARD_OUT
        exceptionFormat TestExceptionFormat.FULL
        showCauses true
        showExceptions true
        showStackTraces true
    }
}